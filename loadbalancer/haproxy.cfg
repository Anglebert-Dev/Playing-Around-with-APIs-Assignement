global
    maxconn 4096
    log stdout format raw local0 info

defaults
    mode http
    timeout connect 10s
    timeout client 30s
    timeout server 30s
    timeout check 5s
    log global

resolvers mydns
    nameserver dns1 8.8.8.8:53
    nameserver dns2 8.8.4.4:53
    nameserver dns3 1.1.1.1:53
    resolve_retries 3
    timeout resolve 2s
    timeout retry 1s
    hold other 30s
    hold refused 30s
    hold nx 30s
    hold timeout 30s
    hold valid 10s
    hold obsolete 30s

frontend http-in
    bind *:8080
    default_backend webapps

backend webapps
    balance roundrobin
    option httpchk GET /
    http-check expect status 200
    # Use HTTP instead of HTTPS to avoid SSL issues
    server web01 web-01-zrhl.onrender.com:80 resolvers mydns init-addr none
    server web02 web-02.onrender.com:80 resolvers mydns init-addr none
