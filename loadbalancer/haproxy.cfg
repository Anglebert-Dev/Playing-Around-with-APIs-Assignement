global
    maxconn 4096
    log stdout format raw local0 info

defaults
    mode http
    timeout connect 10s
    timeout client 30s
    timeout server 30s
    timeout check 5s
    log global
    option httplog

resolvers mydns
    nameserver dns1 8.8.8.8:53
    nameserver dns2 8.8.4.4:53
    nameserver dns3 1.1.1.1:53
    resolve_retries 3
    timeout resolve 2s
    timeout retry 1s
    hold other 30s
    hold refused 30s
    hold nx 30s
    hold timeout 30s
    hold valid 10s
    hold obsolete 30s

frontend http-in
    bind *:8082
    default_backend webapps
    option forwardfor
    option http-server-close

backend webapps
    balance roundrobin
    option httpchk GET /
    http-check expect status 200
    server web01 web-01:8080 check
    server web02 web-02:8080 check
